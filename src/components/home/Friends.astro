---
import ExternalLink from '../base/ExternalLink.astro'
import { items, assets } from '../../const'

const friends = (await fetch(`${items}/friends`).then(r => r.json())) as Friends
---

<section>
  {friends.data.map(friend => (
    <ExternalLink href={friend.link} data-name={friend.name}>
      <img
        aria-label={friend.name}
        src={`${assets}/${friend.avatar}`}
        alt={friend.name}
      />
    </ExternalLink>
  ))}
</section>

<style lang="less">
  section {
    width: 100%;
    margin: 0 0 1rem;
    padding: 1rem 0;
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;

    @media (max-width: 28rem) {
      margin: 0 0 1.5rem;
    }

    a {
      position: relative;
      display: flex;
      border-radius: 50%;

      img {
        width: 2.5rem;
        height: 2.5rem;
        border: var(--border);
        border-radius: 50%;
        box-shadow: var(--shadow-lite);
        color: transparent;
        background-color: var(--card-background);
        transform-origin: bottom;
        transform: scale(1);
        transition: transform 0.2s;
      }

      &::before {
        content: attr(data-name);
        position: absolute;
        top: -3.75rem;
        left: 50%;
        padding: 0.125em 0.75em;
        font-size: 0.925rem;
        background-color: var(--tooltip-background);
        color: var(--tooltip-color);
        border-radius: var(--border-radius);
        border: var(--border);
        box-shadow: var(--shadow);
        transform: translateX(-50%) translateY(0.25rem) scale(0.9);
        transform-origin: bottom;
        white-space: nowrap;
        opacity: 0;
        visibility: hidden;
        transition: transform 0.2s, opacity 0.2s, visibility 0.2s;
      }

      &:hover,
      &:focus-visible {
        text-decoration: none;
        outline: none;

        &::before {
          opacity: 1;
          visibility: visible;
          transform: translateX(-50%) translateY(0) scale(1);
        }

        img {
          box-shadow: var(--shadow);
          transform: scale(1.5);
        }
      }
    }
  }
</style>
