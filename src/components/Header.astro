---
import { Icon } from "astro-icon"

export interface Props {
  name?: string
  path?: string
  icon?: string
}

const { name, path, icon } = Astro.props as Props
---

<header>
  <h1>
    <a href="/" data-tooltip="主页" aria-label="主页">
      <Icon name="ri:checkbox-blank-circle-line" data-tooltip-transform />
    </a>
    {name && (
      <>
        <span data-divider />
        <a href={path}>
          <Icon name={icon} aria-label={name} />
          <span>{name}</span>
        </a>
      </>
    )}
  </h1>
  <nav role="list">
    <button role="listitem" data-tooltip="搜索" aria-label="搜索">
      <Icon name="ri:search-line" data-tooltip-transform />
    </button>

    <a
      role="listitem"
      href="https://travellings.link/"
      target="_blank"
      rel="noopener noreferrer"
      data-tooltip="开往"
      aria-label="开往"
    >
      <Icon name="ri:map-line" data-tooltip-transform />
    </a>

    <button role="listitem" data-tooltip="导航" aria-label="导航">
      <Icon name="ri:menu-line" data-tooltip-transform />
      <ul role="menu">
        <li role="menuitem">
          <a href="/articles">
            <Icon name="ri:folder-line" aria-label="文章" />
            文章
          </a>
        </li>
        <li role="menuitem">
          <a href="/players">
            <Icon name="ri:headphone-line" aria-label="音乐" />
            音乐
          </a>
        </li>
        <li role="menuitem">
          <a
            href="https://dev.lifeni.life"
            target="_blank"
            rel="noopener noreferrer"
          >
            <Icon name="ri:inbox-line" aria-label="项目" />
            项目
          </a>
        </li>
      </ul>
    </button>
  </nav>
</header>

<style lang="less">
  header {
    padding: 1.75rem 2.5rem 0;
    display: flex;
    align-items: center;
    justify-content: space-between;

    h1 {
      display: flex;
      align-items: center;
      font-size: 1rem;
      line-height: initial;
      font-weight: 500;
      gap: 0.75rem;

      a {
        padding: 1rem;
        display: flex;
        align-items: center;
        color: var(--font-primary);
        transition: all 0.2s;

        &:hover {
          text-decoration: none;
          color: var(--font-link);
        }

        span {
          margin-left: 1rem;
        }

        svg {
          width: 1.25rem;
          height: 1.25rem;
        }
      }

      [data-divider] {
        height: 1.5rem;
        border-left: var(--border);
      }
    }

    nav {
      display: flex;
      align-items: center;
      gap: 0.5rem;

      & > a,
      & > button {
        position: relative;
        padding: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: inherit;
        color: var(--font-primary);
        cursor: pointer;
        transition: all 0.2s;

        &:hover {
          text-decoration: none;
          color: var(--font-link);
        }

        & > svg {
          width: 1.25rem;
          height: 1.25rem;
        }

        ul[role="menu"] {
          position: absolute;
          top: 3.25rem;
          right: 0;
          padding: 0.625rem;
          display: flex;
          flex-direction: column;
          visibility: hidden;
          opacity: 0;
          transform: translateY(-0.25rem);
          box-shadow: var(--shadow);
          border: var(--border);
          border-radius: var(--border-radius);
          transition: all 0.2s;

          li[role="menuitem"] {
            min-width: 6rem;
            display: flex;
            align-items: center;
            border-radius: var(--border-radius);
            transition: all 0.2s;

            &:hover {
              background-color: var(--background-subtle);
            }

            a {
              width: 100%;
              padding: 0.175rem 0.75rem;
              display: flex;
              align-items: center;
              justify-content: flex-start;
              white-space: nowrap;
              font-size: var(--font-normal);
              color: var(--font-primary);
              text-decoration: none;

              svg {
                margin-right: 1rem;
                width: 1.125rem;
                height: 1.125rem;
              }

              &:hover {
                color: var(--font-primary);
              }
            }
          }
        }

        &:hover,
        &:focus {
          color: var(--font-link);

          ul[role="menu"] {
            visibility: visible;
            opacity: 1;
            transform: translateY(0);
          }
        }
      }
    }
  }
</style>
