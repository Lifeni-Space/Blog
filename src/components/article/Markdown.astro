---
export interface Props {
  html: string
}

const { html } = Astro.props as Props
const zoom = Astro.resolve('../../libs/medium-zoom')
---

<article set:html={html}></article>

<script defer type="module" src={zoom} hoist></script>

<style lang="less" global>
  article {
    margin: 1rem 0 0 0;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
    font-family: var(--font-sans);
    font-size: 1rem;
    line-height: 1.875;

    h1,
    h2,
    h3,
    h4 {
      font-weight: var(--font-bold);
      text-justify: none;
      text-align: left;
    }

    h1 {
      margin: 0 0 4.5rem 0;
      font-size: 1.875rem;
      line-height: 1.75;

      @media (max-width: 72rem) {
        margin: 0 0 3.5rem 0;
      }

      @media (max-width: 36rem) {
        margin: 0 0 2.5rem 0;
        font-size: 1.75rem;
      }

      @media (max-width: 28rem) {
        margin: 0 0 2rem 0;
        font-size: 1.625rem;
      }
    }

    h2 {
      margin: 2rem 0;
      font-size: 1.5rem;

      & + h3 {
        margin-top: 1rem;

        @media (max-width: 28rem) {
          margin-top: 0.5rem;
        }
      }

      @media (max-width: 28rem) {
        margin: 1rem 0;
        font-size: 1.375rem;
      }
    }

    h3 {
      margin: 1.5rem 0;
      font-size: 1.25rem;

      @media (max-width: 28rem) {
        margin: 0.75rem 0;
      }

      & + h4 {
        margin-top: 0.5rem;

        @media (max-width: 28rem) {
          margin-top: 0.25rem;
        }
      }
    }

    h4 {
      margin: 0.75rem 0;
      font-size: 1rem;

      @media (max-width: 28rem) {
        margin: 0.5rem 0;
      }
    }

    p {
      margin: 0.5rem 0;
    }

    a {
      overflow-wrap: break-word;
      word-break: break-all;
    }

    code {
      padding: 0.12em 0.4em;
      font-size: 0.925em;
      border: var(--border);
      border-radius: var(--border-radius);
      font-family: var(--font-mono);
      background-color: var(--code-background);
      overflow-wrap: break-word;
      word-break: break-all;
      user-select: all;
    }

    pre {
      width: calc(100% + var(--extra-margin) * 2);
      margin: 1rem calc(var(--extra-margin) * -1);
      padding: 1.125rem 1.5rem;
      font-size: 0.925em;
      border: var(--border);
      border-radius: var(--border-radius);
      background-color: var(--code-background);
      line-height: 1.875;

      code {
        padding: 0;
        border: none;
        font-size: inherit;
        background-color: transparent;
        user-select: auto;
      }

      &::after {
        content: '';
        display: inline-block;
        width: 1.25rem;
      }

      & + img,
      & + table,
      & + pre {
        margin-top: 0.5rem;
      }
    }

    img {
      width: calc(100% + var(--extra-margin) * 2);
      margin: 1rem calc(var(--extra-margin) * -1);
      color: var(--font-secondary);
      text-align: right;
      border: var(--border);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);

      & + img,
      & + table,
      & + pre {
        margin-top: 0.5rem;
      }
    }

    ul,
    ol {
      width: 100%;
      margin: 0.5rem 0;
      padding: 0 0 0 1.5rem;

      li {
        margin: 0.125rem 0;
        padding: 0 0 0 0.5rem;
      }
    }

    strong {
      font-weight: var(--font-bold);
    }

    del {
      color: var(--font-secondary);
    }

    blockquote {
      margin: 1rem 0;
      padding: 0.625rem 0 0.625rem 1.75rem;
      color: var(--font-secondary);
      border-left: solid 0.5rem var(--border-color);

      & :first-child {
        margin-top: 0;
      }

      & :last-child {
        margin-bottom: 0;
      }

      pre,
      table,
      img {
        width: 100%;
        margin-left: 0;
        margin-right: 0;
      }
    }

    iframe {
      width: calc(100% + var(--extra-margin) * 2);
      margin: 1rem calc(var(--extra-margin) * -1);
      border: var(--border);
      border-radius: var(--border-radius);
      background-color: var(--placeholder-background);
    }

    hr {
      margin: 1rem 0;
      border: none;
    }

    table {
      width: calc(100% + var(--extra-margin) * 2);
      margin: 1rem calc(var(--extra-margin) * -1);
      border: var(--border);
      border-radius: var(--border-radius);
      border-collapse: separate;
      border-spacing: 0;
      table-layout: auto;
      text-align: center;
      overflow-x: auto;

      & + img,
      & + table,
      & + pre {
        margin-top: 0.5rem;
      }

      tr {
        &:nth-of-type(even) {
          background-color: var(--placeholder-background);
        }
      }

      tbody tr:last-of-type td {
        border-bottom: none;
      }

      th,
      td {
        padding: 0.625rem 1.5rem;
        color: inherit;
        text-align: start;
        border-right: var(--border);
        border-bottom: var(--border);

        text-align: justify;
        text-justify: auto;
        overflow-wrap: break-word;

        &:last-of-type {
          border-right: none;
        }

        code {
          white-space: nowrap;
        }
      }

      th {
        font-weight: var(--font-bold);
        background-color: var(--placeholder-background);
      }
    }

    details {
      width: 100%;
      margin: 1rem 0;
      display: flex;
      flex-direction: column;

      summary {
        width: fit-content;
        cursor: pointer;
        font-weight: var(--font-bold);
        list-style: none;

        &::before {
          content: '|>';
          display: inline-block;
          font-family: var(--font-mono);
          margin-right: 0.5rem;
          transition: all 0.2s;
        }

        & + * {
          opacity: 0;
          transition: all 0.2s;
        }
      }

      &[open] summary {
        margin-bottom: 1.75rem;

        &::before {
          transform: rotate(90deg);
        }

        & + * {
          opacity: 1;
        }
      }
    }
  }
</style>
