---
import type { MDXInstance } from 'astro'
import type { Article } from '../../../types'
import List from './List.astro'

const production = import.meta.env.MODE === 'production'
const articles = (await Astro.glob<Article>('../../../notebook/文章/*.mdx'))
  .filter(({ frontmatter }) => !production || !frontmatter.draft)
  .sort(
    (a: MDXInstance<Article>, b: MDXInstance<Article>) =>
      new Date(b.frontmatter.date.created).getTime() -
      new Date(a.frontmatter.date.created).getTime()
  )

export interface Props {
  mode?: 'grid' | 'list'
  limit?: number
}

const { mode = 'list', limit } = Astro.props
---

<List mode={mode} limit={limit} id="article" name="文章" contents={articles} />
