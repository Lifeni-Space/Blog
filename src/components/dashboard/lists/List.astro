---
import type { MDXInstance } from 'astro'
import type { Article, Story } from '../../../types'
import Card from '../../ui/Card.astro'

const production = import.meta.env.MODE === 'production'

export interface Props {
  mode?: 'grid' | 'list'
  name: string
  id: 'article' | 'story'
  contents: MDXInstance<Article>[] | MDXInstance<Story>[]
  limit?: number
}

const { mode = 'list', limit, id, name, contents } = Astro.props
---

{
  contents.length === 0 ? (
    <div
      w="full"
      h="66"
      flex="~ col items-center justify-center"
      border="~ 1 color-line"
      bg="muted"
      shadow="lg"
      rounded="md"
    >
      <h2 text="subtle">暂时没有{name}</h2>
    </div>
  ) : (
    <ul
      w="extend"
      m="x--4"
      p="x-4 b-5 sm:b-0"
      flex={mode === 'grid' ? 'none' : '~ sm:grid'}
      grid={
        mode === 'grid' ? '~ cols-1 sm:cols-2 gap-4' : 'sm:~ sm:cols-2 gap-4'
      }
      overflow="x-auto sm:unset"
    >
      {contents.slice(0, limit || contents.length).map(({ frontmatter }) => (
        <li w="full">
          <Card
            type={id}
            href={`/${id}/${frontmatter.id}`}
            mode={mode}
            frontmatter={frontmatter}
          />
        </li>
      ))}
    </ul>
  )
}
