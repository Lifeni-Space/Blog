---
import App from '@components/App.astro'
import Footer from '@components/base/Footer.astro'
import Header from '@components/base/Header.astro'
import List from '@components/notebook/List.astro'
import MoreLink from '@components/ui/link/MoreLink.astro'
import { navs } from '@libs/consts'
import { getCollection } from 'astro:content'

const latest = [
  ...(await getCollection('文章')),
  ...(await getCollection('专题')),
]
  .map(({ data }) => data)
  .filter(({ draft }) => import.meta.env.DEV || !draft)
  .sort((a, b) => b.date.created.getTime() - a.date.created.getTime())[0]
---

<App>
  <Header slot="header" action="更多" links={navs} />
  <Footer slot="footer" />
  <List type="文章" name="记录干杯" contents={[latest]}>
    <MoreLink name="查看更多" href="/articles" />
  </List>
</App>
