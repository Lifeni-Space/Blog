---
import App from '@components/App.astro'
import Footer from '@components/base/Footer.astro'
import Header from '@components/base/Header.astro'
import List from '@components/notebook/List.astro'
import MoreLink from '@components/ui/link/MoreLink.astro'
import { navs } from '@libs/consts'

import { getCollection } from 'astro:content'
const articles = (await getCollection('文章'))
  .map(({ data }) => data)
  .filter(({ draft }) => import.meta.env.DEV || !draft)
  .sort((a, b) => b.date.created.getTime() - a.date.created.getTime())
---

<App scope="记录干杯" name="文章">
  <Header slot="header" action="更多" links={navs} />
  <Footer slot="footer" />
  <List type="文章" suffix="篇文章" contents={articles}>
    <MoreLink name="已存档文章" href="/archives" />
  </List>
</App>
