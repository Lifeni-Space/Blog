---
export interface Props {
  article: Article
}

import Layout from 'component:Layout'

import Article from 'component:article/Markdown'
import Meta from 'component:article/Meta'
import Comments from 'component:article/Comments'
import Contents from 'component:article/Contents'

const { article } = Astro.props as Props

export async function getStaticPaths() {
  const files = Astro.fetchContent(
    '../../../contents/articles/*.md'
  ) as Article[]

  return files.map(file => ({
    params: { name: file.name },
    props: { article: file },
  }))
}
---

<Layout title={article.title} description={article.description} highlight>
  <Article html={article.astro.html} />
  <Meta date={article.date} license={article.license} />
  {article.astro.headers.length !== 1 && (
    <Contents headers={article.astro.headers} />
  )}
  <Comments />
</Layout>

<style lang="less">
  :global(body) {
    background-color: var(--background) !important;
  }
</style>
